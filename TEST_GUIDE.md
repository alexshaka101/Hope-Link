# 🧪 HopeLink 孩童端 AI 聊天系統測試指南

## 🚀 快速開始

### 1. 啟動專案

由於專案使用純 HTML/CSS/JavaScript，可以直接在瀏覽器中打開：

```bash
# 方法一：使用 VS Code Live Server
# 在 VS Code 中右鍵 index.html → "Open with Live Server"

# 方法二：使用 Python 簡易伺服器
cd "D:\Download\Media\Cursor\Hope Link_prototype1"
python -m http.server 8000
# 然後在瀏覽器打開 http://localhost:8000

# 方法三：使用 Node.js http-server
npx http-server -p 8000
# 然後在瀏覽器打開 http://localhost:8000
```

### 2. 開啟聊天介面

1. 在首頁點擊「我是孩子」卡片
2. 或點擊導覽列的「孩童端」
3. 在彈出的模態視窗中點擊「開始使用」
4. AI 聊天視窗將會打開

---

## 🧪 功能測試清單

### ✅ 基礎功能測試

#### 1. UI 載入測試
- [ ] AI 光球動畫正常顯示
- [ ] 光球有脈動和漂浮效果
- [ ] 光環有擴展動畫
- [ ] 初始問候訊息顯示

#### 2. 語言切換測試
- [ ] 點擊右上角語言按鈕（中文/EN/УКР/عربي）
- [ ] 按鈕狀態正確切換（active 樣式）
- [ ] 語音識別語言同步更新

#### 3. 語音輸入測試

**準備工作**：
- 確保使用 HTTPS 或 localhost
- 授予瀏覽器麥克風權限
- 使用支援的瀏覽器（Chrome/Edge/Safari）

**測試步驟**：
```
1. 按住 🎙️ 按鈕
   ✓ 按鈕變為橘色
   ✓ 出現脈動動畫
   ✓ 按鈕文字保持可見

2. 對著麥克風說話
   建議測試語句（中文）：
   - "我喜歡吃蘋果"
   - "我家有一隻狗狗"
   - "我想念媽媽"

3. 鬆開按鈕
   ✓ 錄音停止
   ✓ 訊息顯示在聊天區（綠色氣泡）
   ✓ AI 在 0.8 秒後回應（橘黃氣泡）
```

#### 4. 表情選擇測試
```
測試每個表情：
😊 開心 → 情緒指示器顯示「很高興你開心！」
😟 緊張 → 顯示「沒關係，慢慢來～」+ warning 樣式
😢 難過 → 顯示「沒關係，慢慢來～」+ warning 樣式
😴 想休息 → 自動進入安撫模式
😐 還好 → 正常狀態
```

#### 5. 對話階段測試

**階段 1（訊息 1-5）：中性話題**
```
測試語句：
- "我喜歡藍色"
- "我最喜歡吃冰淇淋"
- "我有一個玩具車"

預期結果：
✓ AI 詢問生活相關問題（食物、顏色、玩具）
✓ 語氣輕鬆友善
✓ 情緒指示器：「光光在聽你的故事喔～」
```

**階段 2（訊息 6-10）：家庭相關**
```
測試語句：
- "我家有一隻貓"
- "我們家的房子是白色的"
- "我哥哥很高"

預期結果：
✓ AI 開始詢問家庭相關問題
✓ 情緒指示器變更：「光光想更了解你～」
✓ 回憶樹出現光點
✓ 關鍵詞標籤出現（家庭🏠圖標）
```

**階段 3（訊息 11+）：情感深入**
```
測試語句：
- "我想念我的媽媽"
- "我記得家裡的花園"
- "我喜歡跟爸爸一起玩"

預期結果：
✓ AI 更深入地詢問情感與記憶
✓ 情緒指示器：「謝謝你願意分享 💚」
✓ 更多光點出現在回憶樹上
✓ 關鍵詞標籤增加（情感💚圖標）
```

#### 6. 安全監控測試

**測試敏感詞彙**：
```
中文測試：
- "我害怕" → 應自動暫停，進入安撫模式
- "有人打我" → 應自動暫停
- "戰爭" → 應自動暫停

英文測試：
- "I'm scared" → 自動暫停
- "war" → 自動暫停
- "hurt" → 自動暫停

預期結果：
✓ 對話立即暫停
✓ 顯示安撫覆蓋層（月亮與星星）
✓ 訊息：「沒關係，我們休息一下 💚」
✓ 情緒指示器變為 warning 狀態
```

#### 7. 暫停與恢復測試
```
1. 點擊「🌙 休息一下」按鈕
   ✓ 顯示安撫覆蓋層
   ✓ 月亮圖標發光動畫
   ✓ 星星閃爍動畫
   ✓ 語音輸入被禁用

2. 點擊「準備好繼續了」
   ✓ 安撫層淡出
   ✓ 恢復正常對話介面
   ✓ 情緒指示器恢復：「光光在聽你的故事喔～」
   ✓ 語音輸入恢復正常
```

#### 8. 故事回顧測試
```
1. 進行多輪對話（至少 5 輪）
2. 點擊「🌿 查看我的故事」
   ✓ 故事回顧面板從底部滑出
   ✓ 顯示提取的關鍵詞標籤
   ✓ 標籤有主題圖標（🏠🍎💚📍👤✨）
   ✓ 標籤有淡入彈出動畫

3. 點擊關鍵詞標籤
   ✓ 標籤有 hover 效果（上浮、陰影）

4. 點擊 ✕ 關閉
   ✓ 面板平滑滑下關閉
```

---

## 🔬 進階測試

### API 整合測試

#### 1. Gemini API 連線測試
```javascript
// 在瀏覽器 Console 執行
await ChildAIChat.callGeminiAPI("Hello, how are you?")
    .then(response => console.log("✓ API 回應:", response))
    .catch(error => console.error("✗ API 錯誤:", error));
```

預期結果：
- ✓ 收到文字回應
- ✓ 回應為英文
- ✓ 回應簡短（1-2 句話）

#### 2. 語義提取測試
```javascript
// 測試語義提取
const testText = "我想念我家的小狗，他叫小白";
const result = await extractSemanticInfo(testText);
console.log("語義分析結果:", result);
```

預期結果：
```json
{
  "theme": "家庭",
  "nouns": ["家", "小狗", "小白"],
  "emotion": "正面",
  "isFamily": true,
  "confidence": 0.8
}
```

#### 3. Hash 編碼測試
```javascript
// 測試哈希生成
const testData = {
    keywords: ["家", "媽媽", "想念"],
    themes: ["家庭", "情感"],
    emotions: ["正面"]
};
const hash = await generateSemanticHash(testData);
console.log("生成的哈希:", hash);
```

預期結果：
- ✓ 返回 64 個字元的十六進位字串
- ✓ 相同輸入產生相同哈希
- ✓ 不同輸入產生不同哈希

#### 4. 記憶池儲存測試
```javascript
// 檢查記憶卡
console.log("記憶卡數量:", ChildAIChat.memoryCards.length);
console.log("最新記憶卡:", ChildAIChat.memoryCards[ChildAIChat.memoryCards.length - 1]);

// 檢查 localStorage
const stored = JSON.parse(localStorage.getItem('hopelink-memory-cards'));
console.log("儲存的記憶卡:", stored);
```

---

## 🎨 視覺效果測試

### 動畫效果檢查表
```
[ ] AI 光球
    [ ] 核心脈動（2秒週期）
    [ ] 整體漂浮（3秒週期，上下10px）
    [ ] 光環擴展（3秒週期，依序觸發）

[ ] 對話氣泡
    [ ] 淡入彈出動畫（0.4秒）
    [ ] AI 氣泡：左下圓角較小
    [ ] 孩童氣泡：右下圓角較小

[ ] 情緒指示器
    [ ] 圖標脈動動畫（2秒週期）
    [ ] warning 狀態時搖晃動畫

[ ] 回憶樹
    [ ] 樹幹繪製動畫（2秒）
    [ ] 光點發光動畫（2秒週期）
    [ ] 光點隨機位置分布

[ ] 語音按鈕
    [ ] Hover 放大效果
    [ ] 錄音時脈動動畫（1秒週期）
    [ ] 波紋擴散動畫

[ ] 安撫模式
    [ ] 月亮發光動畫（3秒週期）
    [ ] 星星閃爍動畫（2秒週期，錯開觸發）
    [ ] 淡入淡出過渡（0.5秒）

[ ] 關鍵詞標籤
    [ ] 淡入彈出動畫（0.4秒）
    [ ] Hover 上浮效果
```

---

## 📱 響應式測試

### 桌面端（> 768px）
```
[ ] 光球大小：120px
[ ] 聊天氣泡最大寬度：70%
[ ] 控制區橫向排列
[ ] 語音按鈕：100x100px
[ ] 表情按鈕：48x48px
```

### 移動端（< 768px）
```
[ ] 模態視窗全螢幕
[ ] 光球大小：100px
[ ] 聊天氣泡最大寬度：85%
[ ] 控制區縱向排列
[ ] 語音按鈕：80x80px
[ ] 表情按鈕：44x44px
```

---

## 🌐 多語言測試

### 中文（zh）
```
測試語句：
"我喜歡吃蘋果" → AI 應以中文回應
"我家有一隻狗" → 關鍵詞：家、狗
```

### 英文（en）
```
測試語句：
"I like apples" → AI 應以英文回應
"I have a dog at home" → 關鍵詞：home, dog
```

### 烏克蘭文（uk）
```
測試語句：
"Я люблю яблука" → AI 應以烏克蘭文回應
"У мене є собака вдома" → 關鍵詞：дім, собака
```

### 阿拉伯文（ar）
```
測試語句：
"أحب التفاح" → AI 應以阿拉伯文回應
"لدي كلب في المنزل" → 關鍵詞：منزل، كلب

注意：阿拉伯文應啟用 RTL 佈局
```

---

## 🐛 已知問題與解決方案

### 問題 1：語音識別無法啟動
**症狀**：點擊麥克風按鈕沒有反應

**可能原因**：
- 未授予麥克風權限
- 使用不支援的瀏覽器
- 非 HTTPS 連線（localhost 除外）

**解決方案**：
1. 檢查瀏覽器設定 → 隱私權 → 麥克風權限
2. 使用 Chrome、Edge 或 Safari
3. 使用 localhost 或 HTTPS 連線

### 問題 2：AI 回應緩慢或無回應
**症狀**：說完話後 AI 沒有回應

**可能原因**：
- API 配額已用盡
- 網路連線問題
- API Key 過期

**解決方案**：
1. 檢查 Console 錯誤訊息
2. 檢查網路連線
3. 確認 API Key 有效性
4. 備用方案：系統會返回預設回應

### 問題 3：關鍵詞未正確提取
**症狀**：說了家庭相關內容但沒有生成標籤

**可能原因**：
- 語音識別錯誤
- 語義分析失敗
- JSON 解析錯誤

**解決方案**：
1. 檢查 Console 中的語義分析結果
2. 查看識別的文字是否正確
3. 備用方案：使用簡單關鍵詞匹配

---

## 📊 效能測試

### 載入時間
```
目標：
- 初始載入 < 2 秒
- AI 回應時間 < 3 秒
- 動畫流暢度 60fps
```

### 記憶體使用
```
監測項目：
- 對話 20 輪後記憶體使用
- 是否有記憶體洩漏
- localStorage 大小限制（5-10MB）
```

### 測試工具
```
使用 Chrome DevTools：
1. Performance tab → 記錄對話過程
2. Memory tab → 拍攝堆疊快照
3. Network tab → 檢查 API 請求
4. Console → 監控錯誤與警告
```

---

## ✅ 測試檢查表總結

### 核心功能（必測）
- [ ] 語音輸入正常運作
- [ ] AI 能正確回應
- [ ] 語義提取與關鍵詞生成
- [ ] 安全監控觸發正常
- [ ] 記憶卡儲存成功

### UI/UX（重要）
- [ ] 所有動畫流暢
- [ ] 響應式設計正常
- [ ] 多語言切換正確
- [ ] 表情選擇有反饋
- [ ] 故事回顧功能正常

### 進階功能（建議）
- [ ] 對話階段正確推進
- [ ] Hash 編碼正確生成
- [ ] 回憶樹視覺化
- [ ] 安撫模式體驗良好

---

## 🎯 測試報告模板

```markdown
## 測試報告

**測試日期**：2025/10/20
**測試人員**：[姓名]
**測試環境**：
- 瀏覽器：Chrome 120.0
- 作業系統：Windows 11
- 網路環境：本地伺服器

### 測試結果

#### ✅ 通過項目
1. 語音輸入功能正常
2. AI 回應及時且合適
3. 動畫效果流暢

#### ⚠️ 需要改進
1. 語義提取準確度可提升
2. 移動端佈局需微調

#### ❌ 發現問題
1. [問題描述]
   - 重現步驟：
   - 預期行為：
   - 實際行為：
   - 截圖：

### 建議
1. [改進建議 1]
2. [改進建議 2]
```

---

## 📞 測試支援

如有測試相關問題，請：
1. 查看瀏覽器 Console 錯誤訊息
2. 檢查 Network tab 中的 API 請求
3. 參考 `CHILD_AI_CHAT_README.md` 常見問題
4. 記錄問題並附上截圖

---

**祝測試順利！** 🎉

如果發現 bug 或有改進建議，請詳細記錄並報告。

